{{template "header.html" .}}

<section>
    <h1>{{.Club.Name}}</h1>

    <p>in <a href="{{BasePath .Club.City.Slug}}">{{.Club.City.Name}}</a></p>

    <p>{{.Club.Description}}</p>

    <ul>
        {{if .Club.Instagram}}
        <li><a href="{{.Club.Instagram}}">Instagram</a></li>
        {{end}}
        {{if .Club.StravaClub}}
        <li><a href="{{.Club.StravaClub}}">Strava-Club</a></li>
        {{end}}
        {{if .Club.Website}}
        <li><a href="{{.Club.Website}}">Website</a></li>
        {{end}}
    </ul>

    {{if .Club.LatLon}}
    <div id="club-map" data-name="{{.Club.Name}}" data-lat="{{.Club.LatLon.Lat}}" data-lon="{{.Club.LatLon.Lon}}"></div>
    {{end}}

    <small>
        (Hinzugefügt am: {{.Club.AddedRaw}}{{if .Club.UpdatedRaw}}, aktualisiert am: {{.Club.UpdatedRaw}}{{end}})
    </small>

    <p>
        Sind die Informationen fehlerhaft oder gibt es ein anderes Problem mit diesem Eintrag?
    </p>
    <div>
        <a role="button" href="{{.ReportLink}}" target="_blank">Fehler melden</a>
    </div>
</section>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var mapDiv = document.getElementById('club-map');
    var lat = parseFloat(mapDiv.dataset.lat);
    var lon = parseFloat(mapDiv.dataset.lon);
    var name = mapDiv.dataset.name;
    var map = L.map('club-map').setView([lat, lon], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);
    L.marker([lat, lon]).addTo(map)
        .bindPopup(name).openPopup();
});
</script>


{{template "footer.html" .}}